[{"title":"Markdown渲染引擎換成 markdown-it","url":"%2F2019%2F07%2F05%2F2019-07-05-Markdown%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E%E6%8F%9B%E6%88%90%20markdown-it%2F","content":"\n## 更換渲染引擎\n\nHexo 預設的 markdown 渲染引擎是 marked，並使用 hexo-renderer-marked 此 Hexo 外掛來將 Markdown 轉換成靜態檔案 HTML，但因前面提到的需求，所以要刪除原本的渲染引擎\n\n```htmlmixed=\nnpm uninstall hexo-renderer-marked --save\n```\n\n安裝我們要改用的 Markdown 渲染引擎：[markdown-it](https://github.com/hexojs/hexo-renderer-markdown-it/wiki/Getting-Started)，而使用此渲染引擎的 Hexo 外掛就是 hexo-renderer-markdown-it，所以要在 hexo 的專案中安裝此外掛：\n\n```htmlmixed=\nnpm install markdown-it --save\n```\n\n## 使用hexo-markdown-it導致文章目錄失效的解決方案\n\n只需使用一個插件markdown-it-named-headings\n\n```htmlmixed=\nnpm install markdown-it-named-headings --save\n```\n\n然後添加一行以使用此插件呈現它\n\n```htmlmixed=\nparser.use(require('markdown-it-named-headings'))\n```\n\n再node_modules/hexo-renderer-markdown-it/lib/renderer.js添加\n\n```javascript=\n'use strict';\n\nmodule.exports = function (data, options) {\n  var MdIt = require('markdown-it');\n  var cfg = this.config.markdown;\n  var opt = (cfg) ? cfg : 'default';\n  var parser = (opt === 'default' || opt === 'commonmark' || opt === 'zero') ?\n    new MdIt(opt) :\n    new MdIt(opt.render);\n  // 在這加入\n  parser.use(require('markdown-it-named-headings'))\n  \n  if (opt.plugins) {\n    parser = opt.plugins.reduce(function (parser, pugs) {\n      return parser.use(require(pugs));\n    }, parser);\n  }\n\n  if (opt.anchors) {\n    parser = parser.use(require('./anchors'), opt.anchors);\n  }\n\n  return parser.render(data.text);\n};\n```\n## 修改文章目錄直接展開\n\n到themes/next/source/css/_common/components/sidebar/sidebar-toc.styl收尋`nav-child`\n\n```css=\n// 原本\n.post-toc .nav .nav-child { display: none; }\n// 修改為\n.post-toc .nav .nav-child { display: block; }\n```\n\n![](https://i.imgur.com/2Uu129n.png)\n\n## 參考資料\n[markdown-it 中文文档](https://markdown-it.docschina.org/)\n[將 Hexo 的 Markdown 渲染引擎換成 markdown-it](https://titangene.github.io/article/hexo-markdown-it.html)\n[hexo-renderer-markdown-it Issues-文章目錄失效](https://github.com/hexojs/hexo-renderer-markdown-it/issues/40)\n[使用hexo-markdown-it导致文章目录失效的解决方案](https://pujiaxun.com/2016/08/12/20/)\n[hexo-theme-next](https://github.com/iissnan/hexo-theme-next/issues/710)","tags":["Hexo"],"categories":["Hexo"]},{"title":"架設Hexo+GitHub","url":"%2F2019%2F07%2F04%2F2019-07-04-%E6%9E%B6%E8%A8%ADHexo%2BGitHub%2F","content":"## 架設Hexo+GitHub\n\n### 1.進入 GitHub 開啟 Repo\n\n![](https://i.imgur.com/bEkkBua.png)\n\nRepository Name 輸入:\n```htmlmixed=\n自己名稱.github.io\n```\n\n### 2.安裝 Hexo\n\n由於 Nexo 是使用指令安裝，所以要開啟 CMD (終端機) 來輸入以下指令\n```htmlmixed=\nnpm install hexo-cli -g\n```\n\n### 3.建立 Hexo\n\n首先建議先到你想建立的目錄再輸入，輸入以下指令 ( projectname 換成自己的名稱)\n```htmlmixed=\nhexo init projectname\n```\n\n\n### 4.啟動Hexo\n\n進入 Hexo 目錄後，啟動 Hexo。\n```htmlmixed=\nhexo server\n```\n\n## 主題來源\n\n這次所使用的主題是[Next](https://theme-next.iissnan.com/)\n\n官方](https://hexo.io/themes/)也有許多的主題可以取得\n\n### 替換主題\n\n下載主題後將主題解壓縮至 Blog 資料夾的 themes 下\n\n![](https://i.imgur.com/O8ElyOE.png)\n\n並開啟 _config.yml\n\n![](https://i.imgur.com/7HDshjl.png)\n\n透過收尋尋找theme\n\n```htmlmixed=\ntheme: hexo-theme-next-master\n```\n\n將 theme 改成你剛剛下載的主題資料夾名稱，然後輸入指令重啟即可。\n```htmlmixed=\nhexo server\n```\n\n### Hexo 基礎設置\n\n主要會修改 _config.yml 的地方只有這幾個。\n```htmlmixed=\nSite\ntitle: Welcome.Web.World // 網站標題\nsubtitle: 歡迎來到網路世界。 // 網站副標題\ndescription: Welcome.Web.World // 網站敘述\nkeywords: // 關鍵字\nauthor:  // 網站作者\nlanguage: zh-TW // 網站語系\ntimezone:\n\nURL\nurl: http://yoursite.com //輸入您的網站URL，舉例我的就是waiue0620.github.io\nroot: /\npermalink: :year/:month/:day/:title/\npermalink_defaults:\n```\n\n### 社群連結\n\n社群連結相關設定查詢 Social Links 就可以看到相關設定\n```htmlmixed=\nsocial:\n  GitHub: https://github.com/hsiangfeng || github\n  E-Mail: mailto:yourname@gmail.com || envelope\n  Weibo: https://weibo.com/yourname || weibo\n  Google: https://plus.google.com/yourname || google\n  Twitter: https://twitter.com/yourname || twitter\n  FB: https://www.facebook.com/HsiangFeng.hf || facebook\n  VK Group: https://vk.com/yourname || vk\n  StackOverflow: https://stackoverflow.com/yourname || stack-overflow\n  YouTube: https://youtube.com/yourname || youtube\n  Instagram: https://instagram.com/yourname || instagram\n  Skype: skype:yourname?call|chat || skype\n```\n\n### 修改頭像\n首先必須進入主題 (Theme) 的設置檔 (_config.yml)，然後查詢 avatar，並依照下方範例參考輸入。\n```htmlmixed=\navatar:\n  url: /images/avatar.gif // 頭像路徑\n  rounded: false // 頭像是否為圓形\n  opacity: 1 // 透明度\n  rotated: false // 滑鼠移過去是否自動旋轉\n```\n\n### 側邊欄位置\n預設位子在左邊，若不喜歡左邊可修改至右邊，查詢 sidebar，並將 `position: left` 修改成 `position: right` 即可，\n\n> ※僅對 Pisces 或 Gemini 主題有效，預設主題則無效\n\n### 主題修改方式\n查詢 Scheme Settings，就可以修改主題了，預設提供四種主題，只需要將 # 移除即可。\n\n### 顯示滾動百分比\n閱讀文章時若能觀看目前看的百分比是不錯的，所以僅需要將 `scrollpercent: false` 修改成 `scrollpercent: true` 即可。\n\n### 設置首頁不顯示全文(只顯示預覽)\n\n1. 編輯主題配置文件 _config.yml，搜索 auto_excerpt 字段，設置 enable 的其值為 true\n\n![](https://i.imgur.com/r6hWKAj.png)\n\n## 部屬 GitHub\n\n部屬之前必須先安裝一個插件，因為預設 Hexo 並沒有安裝\n\n```htmlmixed=\nnpm install hexo-deployer-git --save\n```\n\n另外因為要上傳到 GitHub，_config.yml 還有 Deployment 的地方必須調整\n\n```htmlmixed=\ndeploy:\n  type: git\n  repo: https://github.com/waiue0620/waiue0620.github.io.git\n  branch: master\n```\n\n修改完畢後輸入指令即可。\nPS.要小心空格 type、 repo、 branch 前面各自有空格。\n```htmlmixed=\nhexo generate\nhexo deploy\n```\n\n## Hexo其他指令\n\n```htmlmixed=\nhexo help #查看帮助\nhexo init #初始化一个目录\nhexo new \"postName\" #新建文章\nhexo new page \"pageName\" #新建页面\nhexo generate #生成网页，可以在 public 目录查看整个网站的文件\nhexo server #啟動Hexo server，本地预览，'Ctrl+C'关闭\nhexo deploy #部署.deploy目录\nhexo clean #清除缓存，**强烈建议每次执行命令前先清理缓存，每次部署前先删除 .deploy 文件夹**\nhexo s g #啟動伺服器，生成靜態頁面\nhexo d g #部屬模式，生成靜態頁面\n```\n\n## 替 Hexo 加入 Search 功能\n\n由於預設是沒有站內 Search 功能，所以必須另外加裝外掛[hexo-generator-searchdb](https://github.com/theme-next/hexo-generator-searchdb)\n\n\n```htmlmixed=\nnpm install hexo-generator-searchdb --save\n```\n\n安裝完必要先修改站點的設定檔 (_config.yml)，複製以下程式碼貼在任意地方\n```htmlmixed=\n// 搜尋功能\nsearch:\n  path: search.xml\n  field: post\n  format: html\n  limit: 100\n```\n\n參數說明:\n\n* path:\n  * 預設通常是 search.xml\n  * 若改為 search.json 就會改生成 search.json，而且檔案大小也會比較小\n* field:\n  * post (Default) - 僅搜尋你發布的文章\n  * page - 僅收錄頁面\n  * all - 全部收錄\n* format - 搜尋頁面的形式，但是僅限於 XML\n  * html (Default) - 壓縮的原始 HTML\n  * raw - 原始文本(也就是 markdown)\n  * excerpt - 只收入摘要 (但是我測試後是只有標題??)\n  * more - 更多 ((????\n* limit - 自定義被索引的帖子數量\n\n接下來替主題開啟 Search，這邊以 NexT 為例。\n開啟主題設定檔 (_config.yml)，然後查詢 Local search，並將 enable 修改為 true 即可\n\n而我的 Search 設置是這樣\n\nsearch:\n  path: search.json\n  field: post\n  format: html\n  limit: 10000\n\n## 加入 Google Analytics\n\n這邊使用 NexT 模板作舉例。\n進入主題 (theme) 中尋找 _config 檔案，並尋找約 754 行~ 757 行\n```htmlmixed=\ngoogle_analytics:\n  tracking_id: \n  localhost_ignored:\n// 修改成以下\ngoogle_analytics:\n  tracking_id: UA-XXXXXX-1 //UAID追蹤碼\n  localhost_ignored: true\n```\n\n再來還有一個檔案需要修改\n\n```htmlmixed=\n檔案路徑:themes\\hexo-theme-next-master\\layout\\_third-party\\analytics\\google-analytics.swig\n```\n\n將檔案內容修改為Google Analytics 網站追蹤 全域網站代碼\n\n查詢追蹤ID、全域網站代碼方法，如下圖\n\n![](https://i.imgur.com/Hezzgg1.png)\n\n## 添加Google搜索\n\n1. 登陸 Google賬號，添加了站點驗證\n2. 前往 [Search Console](https://search.google.com/search-console/welcome) \n\n![](https://i.imgur.com/s6r1OHs.png)\n\n3. 下載HTML認證文件\n4. 將該文件放在站點根目錄的 source 目錄下\n5. 再配置文件 _config.yml 下有一個 skip_render，將驗證文件填入即可保持原樣跳過渲染，如： skip_render: google866eed5335bef122.html\n6. 點擊認證\n\n    > 注意：為避免HTML驗證文件在用命令hexo generate & hexo deploy之後，網站根目錄生成HTML驗證文件被hexo和next主題加了自己的東西，導致驗證不通過，在站點配置文件_config.yml 下有一個skip_render，將驗證文件填入即可保持原樣跳過渲染，如： skip_render: google866eed5335bef122.html \n\n\n## 參考資料\n[架設Hexo+GitHub](https://hsiangfeng.github.io/hexo/20190411/932826160/)\n[手把手教你建github技术博客by hexo](http://wuxiaolong.me/2015/07/31/build-blog-by-hexo/)\n[Hexo側邊欄修改](https://hsiangfeng.github.io/hexo/20190413/2508191011/)\n[Hexo的Next主题个性化设置（二）——进阶设置](http://blog.shenyuanluo.com/HexoConfig2.html)\n[3分鐘完成Hexo網站地圖Sitemap設定](https://tiida54.github.io/2018/01/09/3%E5%88%86%E9%90%98%E5%AE%8C%E6%88%90Hexo%E7%B6%B2%E7%AB%99%E5%9C%B0%E5%9C%96Sitemap%E8%A8%AD%E5%AE%9A/)","tags":["Hexo"],"categories":["Hexo"]},{"title":"Hello World","url":"%2F2019%2F06%2F11%2Fhello-world%2F","content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n"}]